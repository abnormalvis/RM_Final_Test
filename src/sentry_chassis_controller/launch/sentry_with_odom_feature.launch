<launch>
  <!-- Launch args -->
  <arg name="bag_topic" default="/odom"/>
  <arg name="bag_dir" default="/home/idris/final_ws/src/sentry_chassis_controller/bags"/>
  <arg name="inline_resolver" default="true"/>

  <!-- Include PID/controller setup -->
  <include file="$(find sentry_chassis_controller)/launch/sentry_pid_test_fixed.launch"/>

  <!-- Forward kinematics node to compute odom from joint_states -->
  <node pkg="sentry_chassis_controller" type="forward_kinematics" name="forward_kinematics" output="screen">
    <param name="wheel_base" value="0.36"/>
    <param name="wheel_track" value="0.36"/>
    <param name="wheel_radius" value="0.05"/>
    <!-- Keep default frames: odom/base_link; map fusion handled by TF if present -->
  </node>

  <!-- Load teleop parameters into node namespace -->
  <rosparam file="$(find sentry_chassis_controller)/config/teleop_feature.yaml" ns="sentry_control_key_feature" command="load"/>

  <!-- Keyboard teleop (feature variant): spinning-top default ON, quaternion->Euler yaw -->
  <node pkg="sentry_chassis_controller" type="sentry_control_key_feature" name="sentry_control_key_feature" output="screen"/>
</launch>
