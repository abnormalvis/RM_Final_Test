wheel_pid_controller:
  # 说明：
  # - rqt_reconfigure 使用一组扁平的动态参数键（如 wheel_fl_p、pivot_fr_i_clamp）。
  # - 本 YAML 使用分层键（wheels/wheel_fl/p 等）作为启动默认值。
  # - 运行时我们会把动态参数"镜像回写"到对应的分层键上，便于 rosparam get 旧路径看到最新值；
  #   但这不会自动写回文件。如需持久化，请在运行后使用 rosparam/dynparam dump 导出。
  # Controller type so the controller_spawner can load it from the
  # parameter server if needed. Matches plugin XML/class name.
  type: "sentry_chassis_controller/WheelPidController"
  # Subscribe directly to the resolver's output (absolute topic recommended)
  cmd_vel_topic: "/cmd_vel"
  # Do not synthesize fake joint movement by default
  synthetic_fallback: false
  
  # 速度模式: "local" or "global"
  #speed_mode: "local"
  speed_mode: "global"
  # Frame IDs for odometry and TF
  odom_frame: "odom"
  base_link_frame: "base_link"
  
  # Physical defaults (can be overridden per-wheel below)
  wheel_track: 0.36
  wheel_base: 0.36
  wheel_radius: 0.05

  # Default PID for pivot (steering) and wheel (drive). These act as
  # fallbacks if a per-wheel entry is not provided.
  pivot:
    p: 1.0
    i: 0.0
    d: 0.0
    i_clamp: 0.0
    antiwindup: 0.0
  wheel:
    p: 2.0
    i: 0.1
    d: 0.0
    i_clamp: 0.0
    antiwindup: 0.0

  # Optional explicit wheel ordering (controller can use this to iterate)
  wheel_names:
    - wheel_fl
    - wheel_fr
    - wheel_rl
    - wheel_rr
    - pivot_fl
    - pivot_fr
    - pivot_rl
    - pivot_rr

  # Per-wheel PID overrides. If a wheel entry is missing, controller should
  # fallback to the `wheel` or `pivot` defaults above.
  wheels:
    wheel_fl:
      p: 2.0
      i: 0.1
      d: 0.0
      i_clamp: 0.5
      output_min: -10.0
      output_max: 10.0
    wheel_fr:
      p: 2.0
      i: 0.1
      d: 0.0
      i_clamp: 0.5
      output_min: -10.0
      output_max: 10.0
    wheel_rl:
      p: 2.0
      i: 0.1
      d: 0.0
      i_clamp: 0.5
      output_min: -10.0
      output_max: 10.0
    wheel_rr:
      p: 2.0
      i: 0.1
      d: 0.0
      i_clamp: 0.5
      output_min: -10.0
      output_max: 10.0
    pivot_fl:
      p: 1.0
      i: 0.0
      d: 0.0
      i_clamp: 0.0
      output_min: -5.0
      output_max: 5.0
    pivot_fr:
      p: 1.0
      i: 0.0
      d: 0.0
      i_clamp: 0.0
      output_min: -5.0
      output_max: 5.0
    pivot_rl:
      p: 1.0
      i: 0.0
      d: 0.0
      i_clamp: 0.0
      output_min: -5.0
      output_max: 5.0
    pivot_rr:
      p: 1.0
      i: 0.0
      d: 0.0
      i_clamp: 0.0
      output_min: -5.0
      output_max: 5.0

  # 底盘功率限制（与控制器同级参数，而非 wheels 内部）
  power_limit: 100.0
  power:
    effort_coeff: 12.0
    velocity_coeff: 0.0048
    power_offset: 0.0

  # 调试：发布功率限制调试信息（/power_debug）
  power_debug: true